System.register(["./mui-legacy-nJi-LPwx.js","./reactVendor-legacy-CtYIj4Ma.js","./lang-legacy-BZ1lZp4I.js","./react-setup-legacy-DjnQrG6U.js","./base-legacy-BAe6cWtL.js","./load-functions-legacy-Bi-Vku98.js","./router-legacy-s4T0V6vG.js"],(function(a,n){"use strict";var e,t,i,r,c,o,s,l,p,y,d,m,u,h,g,f,b;return{setters:[a=>{e=a.j,t=a.B},a=>{i=a.r},a=>{r=a.u},a=>{c=a.u,o=a.ab,s=a.p,l=a.x,p=a.aF,y=a.bS,d=a.bx,m=a.by,u=a.a5,h=a.bR,g=a.a7},a=>{f=a.b},null,a=>{b=a.u}],execute:function(){a("H",(function({open:a=!1,handleClose:x,currentRow:j,companyHierarchyAllList:C,title:H,context:N,dialogParams:S={}}){const L=r(),w=b(),{id:P}=c((({company:a})=>a.companyInfo)),{pagesSubsidiariesPermission:k}=c((({company:a})=>a)),{isHasCurrentPagePermission:A,companyHierarchyAllList:D}=c((({company:a})=>a.companyHierarchyInfo)),[F,R]=i.useState(!1);return e.jsx(o,{isOpen:a,rightSizeBtn:L("global.button.next"),title:H||L("companyHierarchy.dialog.title"),fullWidth:!0,loading:F,handleLeftClick:x,handRightClick:async()=>{if(j)try{R(!0);const a=l.get("cartId"),{companyId:e}=j;if(!e)return;if(e===Number(P)?await p():e&&await y(Number(e)),a){const n=d(a);await m(n),u.dispatch(h(0))}const t=e===Number(P)?"":e,i=C||D;u.dispatch(g({selectCompanyHierarchyId:t,...C&&{companyHierarchyAllList:C},companyHierarchySelectSubsidiariesList:I(n({data:i,companyId:e})[0])}))}catch(a){f.error(a)}finally{R(!1),x()}},restDialogParams:{TransitionProps:{onExited:()=>{if(!j)return;const{companyId:a}=j;if(a===Number(P)){const{hash:a}=window.location;a.includes("/shoppingList/")&&w("/shoppingLists")}if(a!==Number(P)&&!A){const a=Object.keys(k).find((a=>!!k[a])),n=s.find((n=>n.key===a));n&&(x(),R(!1),w(n.path))}}}},dialogSx:{"& .MuiDialogTitle-root":{border:0},"& .MuiDialogActions-root":{border:0}},...S,children:e.jsx(t,{sx:{maxHeight:"600px"},children:e.jsx(t,{sx:{display:"flex",flexDirection:"column",flex:1},children:N||L("companyHierarchy.dialog.content")})})})}));const n=a("b",(({data:a,companyId:e,parentId:t})=>a.filter((a=>e?a.companyId===e:t?a.parentCompanyId===t:null===a.parentCompanyId||0===a.parentCompanyId)).map((e=>({...e,children:n({data:a,parentId:e.companyId})}))))),I=a=>{let n=[];return n.push({companyId:a.companyId,companyName:a.companyName,parentCompanyId:a.parentCompanyId,parentCompanyName:a.parentCompanyName,channelFlag:a.channelFlag}),a.children&&a.children.length>0&&a.children.forEach((a=>{n=n.concat(I(a))})),n}}}}));
//# sourceMappingURL=HierarchyDialog-legacy-_PEhYefI.js.map
