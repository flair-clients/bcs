import{j as e,B as f,a1 as ee,a6 as ye,o as _,a7 as A,a8 as R,X as be,Y as Ce,C as je,G as H,x as we,d as T,T as ve,z as Se,a9 as Ie,aa as X,ab as E,ac as ke}from"./mui-Cw0dwOiN.js";import{r}from"./reactVendor-BTcQ-GDs.js";import{u as M}from"./lang-cE5BfbQy.js";import{j as Be,u as g,Q as De,a as L,G as W,R as Me,S as Le,U as Pe,V as Fe,r as q,W as Ne,i as te,C as $,q as He,X as z,Y as P,_ as Re,$ as Te,t as se,a0 as oe,k as G,a1 as ne,a2 as ie,a3 as O,a4 as ae,a5 as Q,a6 as Oe,a7 as Ae,a8 as Ee,a9 as ze,aa as _e,ab as We}from"./react-setup-B6u61idX.js";import"./load-functions-AabybIo1.js";import"./base-DriPzto9.js";import{u as N,a as re,m as qe}from"./router-DEI8QtBD.js";import{d as $e}from"./useB2BCallback-DOyIFx1A.js";import{b as Ge}from"./b3TriggerCartNumber-Jl8HZbEY.js";import{H as Ue}from"./HierarchyDialog-8ffGhwnV.js";import{u as Ke}from"./useBlockPendingAccountViewPrice-DRK73VSA.js";import{a as Ve,S as Xe,C as Qe}from"./muiIcon-BiFRwRtm.js";import"./intl-CKipw3rV.js";import"./eCache-BdHG5F0B.js";import"./redux-D7_Lh1Zo.js";import"./toolkit-C5fVsw89.js";import"./lodashEs-Bacu-Uoa.js";import"../index.CgUuH24B.js";import"./global-D7Yn0gGb.js";import"./dateFns-CeqDayOU.js";import"./dropzone-Cizh2goU.js";const Ye=[0,1,2];function ce(){const u=M(),[m,p]=r.useState(!1),[t,c]=Be("sf-isCloseCompanyCredit",!1,sessionStorage),x=g(({company:n})=>n.customer.role),d=g(({b2bFeatures:n})=>n.masqueradeCompany.isAgenting);r.useEffect(()=>{(async()=>{if(!t&&(Ye.includes(Number(x))||Number(x)===3&&d)){const{companyCreditConfig:{creditHold:a,creditEnabled:i}}=await De();p(a&&i)}})()},[x,d,t]);const h=()=>{c(!0),p(!1)};return m?e.jsx(f,{sx:{margin:"1rem 0"},children:e.jsx(ee,{variant:"filled",onClose:()=>h(),severity:"warning",children:u("global.companyCredit.alert")})}):null}function le(){const[u]=L(),m=g(({global:d})=>d.setOpenPageFn),{state:{isCloseGotoBCHome:p}}=r.useContext(W),t=N(),c=()=>{p?window.location.href="/":(t("/"),m==null||m({isOpen:!1,openUrl:""})),window.history.replaceState(null,"",window.location.pathname||"/")},x=u?Me:Le;return e.jsx(x,{children:e.jsx(Pe,{sx:{color:"#757371"},onClick:c})})}function pe(){const{state:{logo:u}}=r.useContext(W),[m]=L();return e.jsx(f,{sx:m?{height:"40px",width:"140px","& li":{height:"40px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"1rem"},"& img":{maxHeight:"40px"}}:{width:"200px",height:"65px",display:"flex",alignItems:"center","& img":{maxHeight:"65px"}},children:e.jsx(ye,{sx:{maxWidth:"200px",cursor:"pointer","& .MuiImageListItem-img":{objectFit:"contain",width:"auto"}},onClick:()=>{window.location.href="/"},children:e.jsx("img",{src:u||Fe,alt:"logo"})})})}var U={},Je=_;Object.defineProperty(U,"__esModule",{value:!0});var de=U.default=void 0,Ze=Je(q()),et=e;de=U.default=(0,Ze.default)((0,et.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");var K={},tt=_;Object.defineProperty(K,"__esModule",{value:!0});var ue=K.default=void 0,st=tt(q()),ot=e;ue=K.default=(0,st.default)((0,ot.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");function nt({width:u,list:m,title:p,value:t,handleItemClick:c,menuRenderItemName:x=n=>n.name,...d},h){const[n]=L(),[a,i]=r.useState(!1),b=r.useRef(null);r.useImperativeHandle(h,()=>({setOpenDropDown:()=>i(!0)}));const C=()=>{i(!1)};return e.jsxs(f,{sx:{width:u||"auto"},children:[Ne?e.jsx(R,{primary:p,sx:{"& span":{fontWeight:n?400:700,color:"#333333"}}}):e.jsxs(A,{ref:b,onClick:()=>i(!0),sx:{pr:0},children:[e.jsx(R,{primary:p,sx:{"& span":{fontWeight:n?400:700,color:"#333333"}}}),a?e.jsx(ue,{}):e.jsx(de,{})]}),e.jsx(be,{anchorEl:b.current,open:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},id:"customized-menu",keepMounted:!0,onClose:C,sx:{"& .MuiList-root.MuiList-padding.MuiMenu-list":{pt:n?0:"8px",pb:n?0:"8px",maxHeight:n?"auto":"200px"}},...d||{},children:m.length&&m.map(w=>{const{key:y}=w,l=t===y?"#3385d6":"black";return e.jsx(Ce,{sx:{color:l,minWidth:n?"auto":u||"155px"},onClick:()=>{C(),c&&c(y)},children:x(w)},y)})})]})}const me=r.forwardRef(nt),Y=[{name:"Log out",key:"logout",idLang:"global.button.logout"}];function xe({closeSidebar:u}){const[m]=L(),p=g(({company:a})=>a.customer.firstName),t=g(({company:a})=>a.customer.lastName),c=N(),x=M(),d=async a=>{const i=Y.find(b=>b.key===a);i&&(i.key==="logout"?c("/login?loginFlag=loggedOutLogin"):i.type==="path"&&i.key&&c(i.key),u&&u(!1))},h="".concat(p,"  ").concat(t),n=r.useMemo(()=>Y.map(a=>({key:a.key,name:x(a.idLang)})),[x]);return e.jsx(f,{sx:{minWidth:"150px",display:"flex",justifyContent:m?"start":"end",mr:"-5px",fontSize:"16px",color:"#333333",textAlign:"center",alignItems:"center"},children:e.jsx(me,{title:h,handleItemClick:d,list:n})})}var V={},it=_;Object.defineProperty(V,"__esModule",{value:!0});var ge=V.default=void 0,at=it(q()),rt=e;ge=V.default=(0,at.default)((0,rt.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");const J={currentInfo:{langId:"companyHierarchy.chip.currentCompany"},representingInfo:{langId:"companyHierarchy.chip.selectCompany"}};function ct(){var j;const u=M(),m=te(),[p,t]=r.useState(!1),[c,x]=r.useState(null),d=r.useRef(null),{state:{switchAccountButton:{color:h="#ED6C02"}}}=r.useContext($),{id:n}=g(({company:o})=>o.companyInfo),a=g(({b2bFeatures:o})=>o.masqueradeCompany.id),{pagesSubsidiariesPermission:i}=g(({company:o})=>o),{selectCompanyHierarchyId:b,companyHierarchyList:C}=g(({company:o})=>o.companyHierarchyInfo),{isOpenCompanyHierarchyDropDown:w}=g(({global:o})=>o),y=r.useMemo(()=>Object.keys(i).some(o=>i[o]),[i]);r.useEffect(()=>{var o;w&&(d!=null&&d.current)&&((o=d.current)==null||o.setOpenDropDown())},[w]);const l=r.useMemo(()=>{var v;const o=b||n||a,k=(v=C.find(S=>Number(S.companyId)===Number(o)))==null?void 0:v.companyName,D=C.map(S=>({name:S.companyName,key:S.companyId}));return{title:k,list:D}},[b,n,C,a]),I=()=>{t(!1),m(He(!1))},F=o=>{const k=l.list.find(D=>Number(D.key)===o);k&&(x({companyId:Number(k.key),companyName:k.name}),t(!0))},B=o=>{const{name:k,key:D}=o,v=b||n||a;return e.jsxs(H,{container:!0,direction:"row",sx:{justifyContent:"space-between"},children:[e.jsx(H,{sx:{mr:2},children:k}),e.jsx(H,{sx:{width:"20px",display:"flex",justifyContent:"center"},children:D===Number(v)&&e.jsx(ge,{sx:{fontSize:"1.2rem"}})})]})},{langId:s}=b?J.representingInfo:J.currentInfo;return!((j=l==null?void 0:l.list)!=null&&j.length)||!y||!n&&!a?null:e.jsxs(e.Fragment,{children:[e.jsxs(f,{sx:{minWidth:"100px",display:"flex",justifyContent:"start",alignItems:"center",fontSize:"1rem",color:"#333333","& .MuiListItemButton-root":{paddingLeft:"0"}},children:[e.jsx(me,{ref:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},menuRenderItemName:B,title:(l==null?void 0:l.title)||"",handleItemClick:o=>F(Number(o)),list:(l==null?void 0:l.list)||[]}),e.jsx(je,{label:u(s),size:"small",sx:{backgroundColor:b?h:"primary.main",color:"white",height:24,"& .MuiChip-label":{px:1}}})]}),e.jsx(Ue,{open:p,handleClose:I,currentRow:c})]})}const lt=we(f)(()=>({"& svg":{color:"#FFFFFF"}}));function pt(u){const{title:m}=u,p=te(),t=M(),c=g(({company:s})=>s.customer.loginType),x=g(({company:s})=>s.customer.role),d=g(({company:s})=>s.companyInfo.status),h=z.get("blockPendingAccountOrderCreation"),[n]=Ke(),[a,i]=r.useState(""),[b,C]=r.useState(!1),[w,y]=r.useState("success"),[l,I]=r.useState("#2E7D32"),F=()=>{p(Re(Te.WAITING_LOGIN)),C(!1)},B={};return Number(d)!==0&&(B.onClose=F),r.useEffect(()=>{const s=Number(d)===0?!0:c===1,j=x===100?!1:s;C(j),j&&(Number(d)===0&&(h&&n&&i(t(P.pendingOrderingAndViewPriceBlocked)),h&&!n&&i(t(P.pendingOrderingBlocked)),!h&&n&&i(t(P.pendingViewPriceBlocked)),!h&&!n&&i(t(P.pendingOrderingNotBlocked)),y("info"),I("#0288D1")),Number(d)===1&&(i(t(P.approvedTip)),y("success"),I("#2E7D32")),Number(d)===2&&(i(P.rejectedTip),y("warning"),I("#ED6C02")))},[h,n,d,c,x,t]),b?e.jsx(lt,{sx:{mb:m?"20px":"0"},children:e.jsx(ee,{...B,severity:w||"success",sx:{color:"#FFFFFF",backgroundColor:l},children:a})}):null}function dt({title:u}){const m=g(se),p=g(({company:l})=>l.customer.role),t=g(({company:l})=>l.companyInfo),c=g(({b2bFeatures:l})=>l.masqueradeCompany.companyName),x=g(({global:l})=>l.cartNumber),d=N(),h=M(),[n]=L(),{state:{portalStyle:{backgroundColor:a="#FEF9F5"}}}=r.useContext($),{purchasabilityPermission:i}=g(oe),{isEnabledCompanyHierarchy:b}=g(({company:l})=>l.companyHierarchyInfo),C=m?i:!0,w=G(a),y=()=>{$e("on-click-cart-button")&&(window.location.href=ne)};return r.useEffect(()=>{Ge()},[]),e.jsxs(f,{children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"70px",alignItems:"center"},children:[e.jsxs(H,{sx:{alignItems:"center",flexDirection:"row",display:"flex"},children:[e.jsx(f,{component:"h4",sx:{fontSize:"20px",fontWeight:"500",color:w||"#333333",ml:0},children:Number(p)===3&&((t==null?void 0:t.companyName)||c||h("global.B3MainHeader.superAdmin"))}),b&&e.jsx(ct,{})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[p!==100&&e.jsx(xe,{}),e.jsxs(f,{sx:{marginLeft:"8px"},children:[p===100&&e.jsx(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{d("/login")},children:h("global.B3MainHeader.signIn")}),e.jsx(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:()=>{window.location.href="/"},children:h("global.B3MainHeader.home")}),C&&e.jsxs(T,{sx:{color:"#333333",fontWeight:700,fontSize:"16px"},onClick:y,children:[h("global.B3MainHeader.cart"),x>0?e.jsx(ve,{id:"cart-number-icon",sx:{backgroundColor:"#1976D2",minWidth:"21px",height:"20px",color:"#FFFFFF",borderRadius:"64px",fontSize:"12px",fontWeight:"500",lineHeight:"20px",marginLeft:"3px",padding:"0px 6.5px"},children:x}):null]})]})]})]}),u&&e.jsx(f,{component:"h3",sx:{height:"40px",m:"0",fontSize:"34px",fontWeight:400,lineHeight:"42px",display:"flex",alignItems:"end",mb:"24px",mt:n?0:"24px",color:w},children:u}),e.jsx(pt,{title:u})]})}const Z=u=>u.reduce((p,t)=>{var c;if(t!=null&&t.subsidiariesCompanyKey){const x=(c=t.permissionCodes)!=null&&c.includes(",")?t.permissionCodes.split(",")[0].trim():t.permissionCodes;p[t.subsidiariesCompanyKey]=ae({level:3,code:x})}return p},{});function he({closeSidebar:u}){const[m]=L(),p=N(),t=re(),c=M(),{dispatch:x}=r.useContext(ie),d=g(({company:s})=>s.customer.role),{selectCompanyHierarchyId:h,isEnabledCompanyHierarchy:n}=g(({company:s})=>s.companyHierarchyInfo),{permissions:a}=g(({company:s})=>s),{state:i}=r.useContext(W),{quoteDetailHasNewMessages:b,registerEnabled:C}=i,y=Se().palette.primary.main,l=()=>{p("/register"),x({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},I=s=>{if(d===100){x({type:"common",payload:{globalMessageDialog:{open:!0,title:"Registration",message:s.configKey==="shoppingLists"?"Please create an account, or login to create a shopping list.":"To receive full access to buyer portal, please register. It will take 2 minutes.",cancelText:"Cancel",saveText:C?"Register":"",saveFn:l}}});return}p(s.path),m&&u&&u(!1)};r.useEffect(()=>{let s=!1;const{hash:j}=window.location,o=j.split("#")[1]||"",k=O(i).filter(v=>v.isMenuItem);if(o){const v=O(i).find(S=>qe(S.path,o));if(v&&(v!=null&&v.subsidiariesCompanyKey)){const{permissionCodes:S}=v,fe=S!=null&&S.includes(",")?S.split(",")[0].trim():S;s=ae({code:fe,level:3})}}const D=Z(k);Q.dispatch(Oe(D)),Q.dispatch(Ae({isHasCurrentPagePermission:s}))},[h,i,p]);const F=r.useMemo(()=>{let s=O(i).filter(o=>o.isMenuItem);const j=Z(s);return h?s=s.filter(o=>o!=null&&o.subsidiariesCompanyKey?j[o.subsidiariesCompanyKey]:!1):s=s.filter(o=>(o==null?void 0:o.subsidiariesCompanyKey)==="companyHierarchy"?n&&j[o.subsidiariesCompanyKey]:!0),s},[h,a,i,n]),B=s=>{if(t.pathname===s)return z.set("prevPath",s),!0;if(t.pathname.includes("orderDetail")){const j=z.get("prevPath")==="/company-orders"?"/company-orders":"/orders";if(s===j)return!0}return!!(t.pathname.includes("shoppingList")&&s==="/shoppingLists"||(t.pathname.includes("/quoteDetail")||t.pathname.includes("/quoteDraft"))&&s==="/quotes")};return e.jsx(Ie,{sx:{width:"100%",maxWidth:360,bgcolor:m?"background.paper":"background.default",color:y||"info.main","& .MuiListItem-root":{"& .MuiButtonBase-root.Mui-selected":{color:G(y)||"#fff",bgcolor:"primary.main",borderRadius:"4px"},"& .MuiButtonBase-root:hover:not(.Mui-selected)":{bgcolor:Ee(y,.12),borderRadius:"4px"}}},component:"nav","aria-labelledby":"nested-list-subheader",children:F.map(s=>{if(s.name==="Quotes"){const{pathname:j}=t;return e.jsx(X,{disablePadding:!0,children:e.jsx(E,{badgeContent:b&&j.includes("quoteDetail")?"":0,variant:"dot",sx:{width:"100%","& .MuiBadge-badge.MuiBadge-dot":{width:8,height:8,bgcolor:"#FFFFFF",right:14,top:22}},children:e.jsx(A,{onClick:()=>I(s),selected:B(s.path),children:e.jsx(R,{primary:c(s.idLang)})})})},s.path)}return e.jsx(X,{disablePadding:!0,children:e.jsx(A,{onClick:()=>I(s),selected:B(s.path),children:e.jsx(R,{primary:c(s.idLang)})})},s.path)})})}function ut({children:u,title:m}){const p=g(se),[t,c]=r.useState(!1),x=g(({global:C})=>C.cartNumber),d=g(({b2bFeatures:C})=>C.masqueradeCompany.isAgenting),{purchasabilityPermission:h}=g(oe),n=p?h:!0,{state:{portalStyle:{backgroundColor:a="#FEF9F5"}}}=r.useContext($),i=()=>{c(!0)},b=G(a);return e.jsxs(f,{sx:{height:"70vh",p:"4vw",display:"flex",flexDirection:"column"},children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",mb:"4.5vw"},children:[e.jsx(E,{badgeContent:0,color:"secondary",children:e.jsx(Ve,{onClick:i,sx:{color:b}})}),e.jsx(pe,{}),e.jsxs(f,{sx:{display:"flex",justifyContent:"space-between","& span":{marginRight:"1.5rem"}},children:[n&&e.jsx(E,{badgeContent:x,max:1e3,sx:{"& .MuiBadge-badge":{color:"#FFFFFF",backgroundColor:"#1976D2",fontWeight:500,fontSize:"12px",minWidth:"18px",height:"18px",top:"8px",right:"3px",marginRight:"-0.5rem"}},children:e.jsx(Xe,{sx:{color:"rgba(0, 0, 0, 0.54)",marginRight:"-0.5rem"},onClick:()=>{window.location.href=ne}})}),e.jsx(f,{sx:{marginLeft:"2px",height:"24px"},children:e.jsx(le,{})})]})]}),e.jsx(f,{component:"h1",sx:{p:0,m:0,mb:"6vw",fontSize:"34px",fontWeight:"400",color:b||"#263238"},children:m}),e.jsx(ce,{}),e.jsx(f,{sx:{flex:1,display:"flex",paddingBottom:d?"52px":"0"},children:u}),t&&e.jsxs(f,{sx:{height:"100vh",position:"fixed",width:"92vw",zIndex:1e3,left:0,top:0,p:"4vw",backgroundColor:"white",boxShadow:"0px 7px 8px -4px #00000033, 0px 12px 17px 2px #00000024, 0px 5px 22px 4px #0000001f"},children:[e.jsxs(f,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",pb:"4vw"},children:[e.jsx(xe,{closeSidebar:c}),e.jsx(Qe,{onClick:()=>c(!1)})]}),e.jsx(he,{closeSidebar:c})]})]})}const mt={"/purchased-products":"global.purchasedProducts.title","/orders":"global.orders.title","/company-orders":"global.companyOrders.title"};function Rt({children:u}){const[m]=L(),p=ke("(min-width:1775px)"),t=re(),[c,x]=r.useState(""),d=M(),h=g(({company:y})=>y.customer.emailAddress),n=g(({company:y})=>y.customer.id),{state:{globalMessageDialog:a},dispatch:i}=r.useContext(ie),b=N();r.useEffect(()=>{(!h||!n)&&!ze(t.pathname)&&b("/login")},[h,n,t,b]),r.useEffect(()=>{const y=_e.find(l=>l.path===t.pathname);if(y&&t.pathname!=="/quoteDraft"){const l=Object.entries(mt).find(([I])=>I===t.pathname);x(d(l?l[1]:y.idLang))}else x("");i({type:"common",payload:{tipMessage:{msgs:[]}}})},[t]);const C=()=>{i({type:"common",payload:{globalMessageDialog:{open:!1,title:"",message:"",cancelText:"Cancel"}}})},w=r.useMemo(()=>["/invoice"].includes(t.pathname)?{overflowX:"hidden"}:{},[t]);return e.jsxs(f,{children:[m?e.jsx(ut,{title:c,children:u}):e.jsxs(f,{id:"app-mainPage-layout",sx:{display:"flex",minHeight:"100vh",margin:"auto",width:p?1775:"100%",minWidth:p?1775:"100%",maxWidth:p?1775:"100%",flexDirection:"row",p:"32px 63px 70px 63px"},children:[e.jsx(le,{}),e.jsxs(f,{sx:{display:"flex",flexDirection:"column",width:"200px",displayPrint:"none"},children:[e.jsx(pe,{}),e.jsx(f,{sx:{pt:"24px"},children:e.jsx(he,{})})]}),e.jsxs(f,{sx:{flex:1,display:"flex",flexDirection:"column",maxWidth:"1450px",width:"100%",p:"0 0px 0px 50px",...w},children:[e.jsx(dt,{title:c}),e.jsx(ce,{}),e.jsx(f,{component:"main",sx:{mt:!m&&!c?"24px":"0"},children:u})]})]}),e.jsx(We,{isOpen:a.open,title:a.title,leftSizeBtn:a.cancelText,rightSizeBtn:a.saveText,handleLeftClick:a.cancelFn||C,handRightClick:a.saveFn,showRightBtn:!!a.saveText,children:e.jsx(f,{sx:{display:"flex",justifyContent:m?"center":"start",width:m?"100%":"450px",height:"100%"},children:a.message})})]})}export{Rt as default};
//# sourceMappingURL=B3Layout-A86Wz0S2.js.map
